import { Component, OnInit } from '@angular/core';
import { CarsService } from 'src/app/_services/cars.service';
import { AccountService } from 'src/app/_services/account.service';
import { User } from 'src/app/_models/user';
import { take } from 'rxjs/operators';
import { Car } from 'src/app/_models/car';
import { ToastrService } from 'ngx-toastr';
import { Observable } from 'rxjs';

@Component({
  selector: 'app-car-card',
  templateUrl: './car-card.component.html',
  styleUrls: ['./car-card.component.css']
})
export class CarCardComponent implements OnInit {
  user: User;
  cars$: Observable  <Car[]>; 
  car: Car;
  constructor(private _accoutService: AccountService, private _carsService: CarsService, private _toastr: ToastrService) { 
    this._accoutService.currentUser$.pipe(take(1)).subscribe(user => this.user = user);
  }

  ngOnInit(): void {
    this.cars$ = this._carsService.getCars();
  }
  addUserCar(){
    console.log("HWDP");

    this._carsService.addUserCar(this.car).subscribe(() => {
      this._toastr.success('Profile updated successfully');      
    })
  }
  readUserCar(){
    this.cars$ = this._carsService.getCars();
  }
}
